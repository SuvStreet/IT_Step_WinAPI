## ЛАБОРАТОРНАЯ РАБОТА №6

Создайте оконное приложение «Помощник читателя», следуя приведенной ниже инструкции. 
 
1. Создайте немодальное диалоговое окно со следующими характеристиками: 
  * идентификатор окна IDD_MAINDLG 
  * заголовок окна «Помощник читателя» 
  * окно можно минимизировать, но не максимизировать 
  * при запуске окно появляется в центре рабочего стола 
  * размеры окна 600x300 или больше. 
 
2. Добавьте на окно следующие элементы управления типов STATIC и EDIT: 
  
* **статик #1**
  * содержит надпись «Исходный текст» 
 
* **текстовое поле #1**
  * многострочное
  * обязательна вертикальная полоса прокрутки
  * при старте приложения поле недоступно для редактирования
 
* **статик #2**
  * содержит надпись «ВАШ ТЕКСТ»
 
* **текстовое поле #2**
  * многострочное 
  * обязательна вертикальная полоса прокрутки 
 
3. Добавьте на окно следующие кнопки: 
  
* **кнопка #1** 
  * содержит надпись «Авторизация» 
  * по нажатию на кнопку появляется MessageBox с сообщением «Эта функция пока недоступна» 
 
* **кнопка #2** 
  * содержит надпись «Открыть» 
  * при запуске приложения кнопка заблокирована 
  * при  снятой  блокировке  по  нажатию  на  кнопку  в  текстовом  поле  #1 отображается произвольный текст длиной не менее 4 строк, после чего поле  становится  доступным  только  для  чтения  (если  это  не  мешает дальше выделять фрагменты текста) 

Указания:
* (1) Чтобы отобразить текст в поле, воспользуйтесь функцией SetWindowText или сообщением WM_SETTEXT. 
* (2) Обратите  внимание,  что  в  текстовом  поле  типа  edit  переходом  на  новую строку считается \r\n, а не просто \n. 
* (3) Для  добавления  или  установки  стиля  ReadOnly  воспользуйтесь  функцией EnableWindow или сообщением EM_SETREADONLY. 

* **кнопка #3**
   * одержит надпись «Очистить» 
   * при запуске приложения кнопка заблокирована 
   * при снятой блокировке по нажатию на кнопку из текстового поля #1 удаляется  всѐ  содержимое  и  поле  становится  доступным  для редактирования
   
Указание:

Для  удаления  текста  воспользуйтесь  сообщением  WM_GETTEXTLENGTH, EM_SETSEL и WM_CLEAR. 
 
* **кнопка #4**
  * содержит надпись «>» 
  * по  нажатию  на  кнопку  в  текстовое  поле  #2  копируется  текст, выделенный в текстовом поле #1 

Указание:

Для  копирования  фрагмента  текста  воспользуйтесь  сообщениями  WM_COPY и WM_PASTE, которые работают со стандартным буфером обмена. 
 
* **кнопка #5**
  * содержит надпись «>>» 
  * по нажатию на кнопку весь текст из текстового поля #1 копируется в текстовое поле #2 

Указание:

Для  копирования  всего  текста  воспользуйтесь  сообщениями WM_GETTEXTLENGTH, WM_GETTEXT и WM_SETTEXT. 
 
* кнопка #6 
  * содержит надпись «Очистить» 
  * по нажатию на кнопку текстовое поле #2 очищается 
 
* кнопка #7 
  * содержит надпись «Записать» 
  * по нажатию на кнопку содержимое текстового поля #2 записывается в текстовый файл new_text.txt c кодировкой utf-8 
 
4. Добавьте  в  приложение  модальное  диалоговое  окно  со  следующими характеристиками: 

* заголовок окна «Авторизация» 
* окно нельзя минимизировать и максимизировать 
* окно  создается  при  нажатии  на  кнопку  «Авторизация»  на  главной форме 
*  окно появляется в центре рабочего стола 

Указание:

Добавьте  еще  один  элемент  типа  Dialog  в  ресурсы, не забудьте создать отдельную диалоговую процедуру. 

5. Добавьте на диалоговое окно элементы  управления в соответствии с рисунком:

![](https://pp.userapi.com/c841432/v841432257/17677/kmvAdsEusAU.jpg)

* в  текстовом  поле  «Пароль»  вводимый  текст  отображается  в  виде звездочек или черных кружков 
* по нажатию на кнопку «Вход» считываются данные из полей «Логин» и «Пароль», после чего окно закрывается 
* если пользователь нажал кнопку «Вход» и не заполнил хотя бы одно из полей, то появляется MessageBox с предупреждением 
* по нажатию на кнопку «Отмена» окно закрывается 
 
6. Логин и пароль, введенные пользователем, сравниваются с эталонными. Если все  введено  верно,  то  текстовое  поле  #1  и  кнопки  #2  и  #3  становятся  доступны пользователю  для  дальнейшей  работы.  Эталонные  логин  и  пароль  можно  хранить, например, в отдельном пространстве имен.

7. Добавьте на главную форму следующие элементы управления: 

* **список #1** 
  * обычный  одноколоночный  список  (ListBox)  с  одиночным  выбором  и сортировкой строк 

* **статик #3**
  * содержит надпись «Словарь» 
 
* **кнопка #8**
* содержит надпись «>» 
* по  нажатию  на  кнопку  текст,  выделенный  в  текстовом  поле  #2, добавляется в список; обычно выделяется одно слово 
* при  добавлении  нужно  реализовать  проверку,  нет  ли  уже  такого элемента в списке 
 
* **кнопка #9**
  * содержит надпись «Удалить» 
  * по нажатию на кнопку запись, выделенная в списке, удаляется из него 
 
* **кнопка #10**
  * содержит надпись «Очистить» 
  * по нажатию на кнопку весь список очищается 
 
* **кнопка #11**
  * содержит надпись «Записать» 
  * по  нажатию  на  кнопку  содержимое  списка  записывается  в  файл list.txt. 
 
* **статик #4**
  * содержит надпись «Всего слов в словаре: » 
 
* **статик #5**
  * показывает количество строк в списке #1 
  * при  добавлении  или  удалении  строк  надпись  показывает  актуальное состояние списка 
 
Указания: 
* (1) Узнать  позиции  выделения  в  строке  можно  с  помощью  сообщения EM_GETSEL. 
* (2) Чтобы  получить  текст  из  поля,  воспользуйтесь  сообщением  WM_GETTEXT или WM_GETLINE. Вы можете скопировать в буфер весь текст или только строку, в которой есть выделенный фрагмент. 
* (3) Чтобы добавить строку в список, используйте сообщение LB_ADDSTRING, а для  удаления  строк  –  сообщения  LB_DELETESTRING  (удаляет  строку  с  заданным индексом) и LB_RESETCONTENT (очищает весь список). 
* (4) Чтобы  получить  индекс  выбранной  строки,  воспользуйтесь  сообщением LB_GETCURSEL. 
* (5) Чтобы  узнать  количество  строк  в  списке,  воспользуйтесь  сообщением LB_GETCOUNT. 
 
8. Добавьте на главную форму следующие элементы управления: 

* **список #2**
  * комбинированный список (ComboBox) 
  * записи в списке не сортируются по алфавиту 
  * список содержит записи «значение», «перевод», «синоним», «антоним» 
 
* **статик #6**
  * содержит надпись «Отношение» 
 
* **текстовое поле #3**
  * многострочнное 
  * одноколоночное 
 
* **кнопка #12**
  * содержит надпись «Сохранить» 
  * по нажатию на кнопку данные, введенные пользователем в текстовое поле #3, сохраняются в некоторой внутренней структуре данных. Это может  быть  ассоциативный  массив,  где  ключом  является  слово, выделенное в списке #1, а значением – текст в текстовом поле #3. 

* **кнопка #13**
  * содержит надпись «Записать» 
  * по нажатию  на кнопку  весь набор слов и толкований записывается в файл dict.txt. 
 
Указание:

Чтобы  узнать,  какая  позиция  выбрана  в  комбинированном  списке, воспользуйтесь сообщением CB_GETCURSEL. 
 
9. Измените обработку нажатия на кнопку #2 следующим образом: 

* по нажатию на кнопку открывается файл text.txt (кодировка utf-8) и его содержимое отображается в текстовом поле #1 
* после того как текст показан, текстовое  поле #1 становится доступным только для чтения (стиль READONLY) 
 
10. Добавьте в приложение строку состояния, которая будет иметь два раздела. В  первом  отображается  логин  пользователя,  а  во  втором  –  первая  строка  текста, введенного  в  текстовое  поле  #1.  При  запуске  программы  в  строку  состояния выводится текст «Неизвестный пользователь» и «Незвестный текст». 

Указания: 
* (1) Чтобы  создать  строку  состояния,  воспользуйтесь  функцией CreateStatusWindow. 
* (2) Чтобы  разбить  строку  состояния  на  несколько  частей,  воспользуйтесь сообщением TB_SETPARTS. 
* (3) Чтобы  задать  текст  в  строке  состояния,  воспользуйтесь  сообщением TB_SETTEXT.

Готовое приложение может выглядеть примерно так: 

![](https://pp.userapi.com/c841432/v841432257/1768f/YOA9UBfHBWI.jpg)
